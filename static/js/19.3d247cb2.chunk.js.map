{"version":3,"sources":["features/catalog/Catalog.module.scss","features/catalog/Catalog.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"],"names":["module","exports","ProductCard","lazy","ShowError","Filters","FilterOptions","FilterCategoriesPanel","Pagination","containerCards","styles","containerCardsWrapper","wrapper","Catalog","useState","page","setPage","dispatch","useAppDispatch","filteredEbooks","useAppSelector","selectFilteredEbooks","fetchError","selectError","searchQuery","useLocation","search","tag","useParams","pagesCount","Math","ceil","length","ebooksForScreenArr","slice","useEffect","setFilters","filter","value","fetchEbooks","query","URLSearchParams","entries","param","sortEbooks","className","fallback","map","ebook","cardStyleVersion","id","ebooksForScreenArrLength","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","i","F","s","n","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,sBAAwB,uCAAuC,eAAiB,kC,2HCW/HC,EAAcC,gBAAK,kBAAM,iCACzBC,EAAYD,gBAAK,kBAAM,gCACvBE,EAAUF,gBAAK,kBAAM,kCACrBG,EAAgBH,gBAAK,kBAAM,kCAC3BI,EAAwBJ,gBAAK,kBAAM,kCACnCK,EAAaL,gBAAK,kBAAM,kCAEtBM,EAAmDC,IAAnDD,eAAgBE,EAAmCD,IAAnCC,sBAAuBC,EAAYF,IAAZE,QA4DhCC,UAtDW,WACxB,MAAwBC,mBAAiB,GAAzC,mBAAOC,EAAP,KAAaC,EAAb,KAEMC,EAAWC,cACXC,EAAiBC,YAAeC,KAChCC,EAAaF,YAAeG,KAC5BC,EAAcC,cAAcC,OAE5BC,EAAQC,cAARD,IAEFE,EAAqBC,KAAKC,KAAKZ,EAAea,OAD/B,IACyD,EACxEC,EAAqCd,EAAee,MAFrC,EAE0DnB,EAF1D,IAE8FA,IAAS,GAqB1H,OAjBAoB,qBAAU,WACRlB,EAASmB,YAAW,CAAEC,OAAQ,iBAAkBC,MAAOX,OACtD,CAACA,EAAKV,IAGTkB,qBAAU,WACRlB,EAASsB,YAAY,OACpB,CAACZ,EAAKV,IAGTkB,qBAAU,WACR,IADc,EACRK,EAAQ,IAAIC,gBAAgBjB,GADpB,cAEIgB,EAAME,WAFV,IAEd,2BAAmC,CAAC,IAA3BC,EAA0B,QACjC1B,EAAS2B,YAAWD,EAAM,MAHd,iCAKb,CAACnB,EAAaP,IAGf,qBAAK4B,UAAWjC,EAAhB,SACE,eAAC,WAAD,CAAUkC,SAAU,cAAC,IAAD,IAApB,UACE,cAACzC,EAAD,IAEA,sBAAKwC,UAAWlC,EAAhB,UACE,oBAAIkC,UAAWpC,EAAf,SACGwB,EAAmBD,OAAS,GAAKC,EAAmBc,KAAI,SAAAC,GACvD,OAAO,cAAC9C,EAAD,CAA4B8C,MAAOA,EAAOC,iBAAiB,QAAzCD,EAAME,SAGnC,cAAC1C,EAAD,CAAYqB,WAAYA,EAAYsB,yBAA0BlB,EAAmBD,OAAQjB,KAAMA,EAAMC,QAASA,OAGhH,cAACV,EAAD,IACA,cAACC,EAAD,IACCe,EAAa,cAAClB,EAAD,IAAgB,Y,gCCzEtC,8CACe,SAASgD,EAA2BC,EAAGC,GACpD,IAAIC,EAEJ,GAAsB,qBAAXC,QAAgD,MAAtBH,EAAEG,OAAOC,UAAmB,CAC/D,GAAIC,MAAMC,QAAQN,KAAOE,EAAK,YAA2BF,KAAOC,GAAkBD,GAAyB,kBAAbA,EAAErB,OAAqB,CAC/GuB,IAAIF,EAAIE,GACZ,IAAIK,EAAI,EAEJC,EAAI,aAER,MAAO,CACLC,EAAGD,EACHE,EAAG,WACD,OAAIH,GAAKP,EAAErB,OAAe,CACxBgC,MAAM,GAED,CACLA,MAAM,EACN1B,MAAOe,EAAEO,OAGbK,EAAG,SAAWC,GACZ,MAAMA,GAERC,EAAGN,GAIP,MAAM,IAAIO,UAAU,yIAGtB,IAEIC,EAFAC,GAAmB,EACnBC,GAAS,EAEb,MAAO,CACLT,EAAG,WACDP,EAAKF,EAAEG,OAAOC,aAEhBM,EAAG,WACD,IAAIS,EAAOjB,EAAGkB,OAEd,OADAH,EAAmBE,EAAKR,KACjBQ,GAETP,EAAG,SAAWS,GACZH,GAAS,EACTF,EAAMK,GAERP,EAAG,WACD,IACOG,GAAoC,MAAhBf,EAAW,QAAWA,EAAW,SAC1D,QACA,GAAIgB,EAAQ,MAAMF","file":"static/js/19.3d247cb2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Catalog_wrapper__Gld0-\",\"containerCardsWrapper\":\"Catalog_containerCardsWrapper__1EmNa\",\"containerCards\":\"Catalog_containerCards__2Z0uA\"};","import { lazy, Suspense, useState, useEffect } from 'react';\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nimport { useAppSelector, useAppDispatch } from '../../helpers/types/hooks';\r\n\r\nimport { setFilters, sortEbooks } from './catalogSlice';\r\nimport { selectFilteredEbooks, selectError } from './catalogSlice';\r\nimport { fetchEbooks } from './catalogSlice';\r\n\r\nimport ProductModel from '../../helpers/types/ProductModel';\r\nimport LoadingSpinner from '../../commonComponents/loadingSpinner/LoadingSpinner';\r\nimport styles from './Catalog.module.scss';\r\n\r\nconst ProductCard = lazy(() => import('../../commonComponents/productCard/ProductCard'));\r\nconst ShowError = lazy(() => import('../../commonComponents/showError/ShowError'));\r\nconst Filters = lazy(() => import('./Filters'));\r\nconst FilterOptions = lazy(() => import('./FilterOptions'));\r\nconst FilterCategoriesPanel = lazy(() => import('./FilterCategoriesPanel'));\r\nconst Pagination = lazy(() => import('./Pagination'));\r\n\r\nconst { containerCards, containerCardsWrapper, wrapper } = styles;\r\n\r\ninterface ParamsType {\r\n  tag: string\r\n}\r\n\r\nconst Catalog: React.FC = () => {\r\n  const [page, setPage] = useState<number>(1);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const filteredEbooks = useAppSelector(selectFilteredEbooks);\r\n  const fetchError = useAppSelector(selectError);\r\n  const searchQuery = useLocation().search;\r\n\r\n  let { tag } = useParams<ParamsType>();\r\n  let itemsPerPage = 4;\r\n  let pagesCount: number = Math.ceil(filteredEbooks.length / itemsPerPage) || 0;\r\n  let ebooksForScreenArr: ProductModel[] = filteredEbooks.slice(itemsPerPage * page - itemsPerPage, itemsPerPage * page) || [];\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(setFilters({ filter: 'categoryFilter', value: tag }));\r\n  }, [tag, dispatch])\r\n\r\n  //fetching ebooks by url tag\r\n  useEffect(() => {\r\n    dispatch(fetchEbooks(''));\r\n  }, [tag, dispatch])\r\n\r\n  //sorting results in store by url query\r\n  useEffect(() => {\r\n    const query = new URLSearchParams(searchQuery);\r\n    for (let param of query.entries()) {\r\n      dispatch(sortEbooks(param[1]));\r\n    }\r\n  }, [searchQuery, dispatch]);\r\n\r\n  return (\r\n    <div className={wrapper}>\r\n      <Suspense fallback={<LoadingSpinner />}>\r\n        <Filters />\r\n        {/*List of products */}\r\n        <div className={containerCardsWrapper}>\r\n          <ul className={containerCards}>\r\n            {ebooksForScreenArr.length > 0 && ebooksForScreenArr.map(ebook => {\r\n              return <ProductCard key={ebook.id} ebook={ebook} cardStyleVersion='full' />\r\n            })}\r\n          </ul>\r\n          <Pagination pagesCount={pagesCount} ebooksForScreenArrLength={ebooksForScreenArr.length} page={page} setPage={setPage} />\r\n        </div>\r\n\r\n        <FilterOptions />\r\n        <FilterCategoriesPanel />\r\n        {fetchError ? <ShowError /> : null}\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Catalog;\r\n\r\n","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}"],"sourceRoot":""}