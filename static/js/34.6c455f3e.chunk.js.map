{"version":3,"sources":["features/slider/Slider.module.scss","features/slider/Slider.tsx"],"names":["module","exports","slider","styles","arrow","leftArr","rightArr","pagesContainer","sliderPages","sliderPage","active","ProductCard","lazy","ShowError","SliderPage","Slider","useState","slidePage","setSlidePage","pagesArray","setPagesArray","dispatch","useAppDispatch","products","useAppSelector","selectProducts","fetchError","selectError","pagesContRef","useRef","turnPage","count","length","prevCount","createPages","useCallback","maxItemsCountPerPage","Math","floor","current","offsetWidth","pagesCount","ceil","index","pagesArr","i","itemsForPageArr","push","ebook","cardStyleVersion","itemWidth","id","useEffect","fetchRandomEbooks","productsCount","category","className","fallback","ref","map","item","onClick","random"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,OAAS,uBAAuB,eAAiB,+BAA+B,MAAQ,sBAAsB,QAAU,wBAAwB,SAAW,yBAAyB,YAAc,4BAA4B,WAAa,2BAA2B,OAAS,yB,oGCMzRC,EAAsFC,IAAtFD,OAAQE,EAA8ED,IAA9EC,MAAOC,EAAuEF,IAAvEE,QAASC,EAA8DH,IAA9DG,SAAUC,EAAoDJ,IAApDI,eAAgBC,EAAoCL,IAApCK,YAAaC,EAAuBN,IAAvBM,WAAYC,EAAWP,IAAXO,OAE7EC,EAAcC,gBAAK,kBAAM,iCACzBC,EAAYD,gBAAK,kBAAM,gCACvBE,EAAaF,gBAAK,kBAAM,kCAiFfG,UA/EU,WACvB,MAAkCC,mBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAoCF,mBAAS,IAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KAEMC,EAAWC,cACXC,EAAWC,YAAeC,KAC1BC,EAAaF,YAAeG,KAC5BC,EAAeC,iBAAuB,MAGtCC,EAAW,SAACC,GACZA,GAAS,IACXb,EAAaa,EAAQ,KACE,IAAdd,GAAmBc,EAAQ,EACpCb,EAAaC,EAAWa,OAAS,GACxBf,IAAcE,EAAWa,OAAS,IAAgB,IAAXD,EAChDb,EAAa,GAEbA,GAAa,SAAAe,GAAS,OAAIA,EAAYF,MAKpCG,EAAcC,uBAAY,WAO9B,IANA,IACIC,EAAuBC,KAAKC,MAAMV,EAAaW,QAASC,YADlC,GAC4D,GAClFC,EAAaJ,KAAKK,KAAKnB,EAASS,OAASI,GACzCO,EAAQ,EACRC,EAAgB,GAEXC,EAAI,EAAGA,EAAIJ,EAAYI,IAAK,CAGnC,IAFA,IAAMC,EAAkB,GAEfD,EAAI,EAAGA,EAAIT,GACdO,IAAUpB,EAASS,OADiBa,IAExCC,EAAgBC,KAAK,cAACpC,EAAD,CAAsCqC,MAAOzB,EAASoB,GAAQM,iBAAiB,QAAQC,UAXtF,IAWiB3B,EAASoB,GAAOQ,KACvDR,IAGFC,EAASG,KAAKD,GAEhB1B,EAAcwB,KACb,CAACrB,IAWJ,OATA6B,qBAAU,WACR/B,EAASgC,YAAkB,CAAEC,cAAe,GAAIC,SAAU,wBACzD,CAAClC,IAEJ+B,qBAAU,WACH1B,GAAYQ,MAChB,CAACA,IAIF,qBAAKsB,UAAWtD,EAAhB,SACE,eAAC,WAAD,CAAUuD,SAAU,6CAApB,UAEE,qBAAKD,UAAWjD,EAAgBmD,IAAK9B,EAArC,SACGF,EAAa,cAACb,EAAD,IAAgBM,EAAWwC,KAAI,SAACC,EAAMjB,GAAY,OAAO,cAAC7B,EAAD,CAAwBG,UAAWA,EAAnC,SAA+C2C,GAA9BjB,QAI1F,oBAAIa,UAAWhD,EAAf,SACGW,EAAWwC,KAAI,SAACC,EAAMjB,GACrB,OAAO,oBAELa,UAAS,UAAK/C,EAAL,YAAmBQ,IAAc0B,EAAQjC,EAAS,MAC3DmD,QAAS,kBAAM/B,EAASa,EAAQ,OAF3BN,KAAKyB,eAOhB,sBAAMN,UAAS,UAAKpD,EAAL,YAAcC,EAAd,KAA0BwD,QAAS,kBAAM/B,GAAU,IAAlE,eACA,sBAAM0B,UAAS,UAAKpD,EAAL,YAAcE,GAAYuD,QAAS,kBAAM/B,EAAS,IAAjE","file":"static/js/34.6c455f3e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"Slider_slider__1bOsF\",\"pagesContainer\":\"Slider_pagesContainer__2M80L\",\"arrow\":\"Slider_arrow__38iI_\",\"leftArr\":\"Slider_leftArr__228g6\",\"rightArr\":\"Slider_rightArr__16RN5\",\"sliderPages\":\"Slider_sliderPages__2dWLp\",\"sliderPage\":\"Slider_sliderPage__38mZr\",\"active\":\"Slider_active__3Wxzh\"};","import { lazy, Suspense, useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useAppSelector, useAppDispatch } from '../../helpers/types/hooks';\r\n\r\nimport { selectProducts, selectError, fetchRandomEbooks } from './sliderSlice';\r\n\r\nimport styles from './Slider.module.scss';\r\n\r\nconst { slider, arrow, leftArr, rightArr, pagesContainer, sliderPages, sliderPage, active } = styles;\r\n\r\nconst ProductCard = lazy(() => import('../../commonComponents/productCard/ProductCard'));\r\nconst ShowError = lazy(() => import('../../commonComponents/showError/ShowError'));\r\nconst SliderPage = lazy(() => import('./SliderPage'));\r\n\r\nconst Slider: React.FC = () => {\r\n  const [slidePage, setSlidePage] = useState(0);\r\n  const [pagesArray, setPagesArray] = useState([]);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const products = useAppSelector(selectProducts);\r\n  const fetchError = useAppSelector(selectError);\r\n  const pagesContRef = useRef<HTMLDivElement>(null);\r\n\r\n  // function for changing slider pages\r\n  const turnPage = (count: number) => {\r\n    if (count >= 100) {\r\n      setSlidePage(count - 100);\r\n    } else if (slidePage === 0 && count < 0) {\r\n      setSlidePage(pagesArray.length - 1);\r\n    } else if (slidePage === pagesArray.length - 1 && count !== -1) {\r\n      setSlidePage(0);\r\n    } else {\r\n      setSlidePage(prevCount => prevCount + count);\r\n    }\r\n  }\r\n\r\n  //function calculate and fill number of pages and it elements\r\n  const createPages = useCallback(() => {\r\n    const itemWidth: number = 90;\r\n    let maxItemsCountPerPage = Math.floor(pagesContRef.current!.offsetWidth / itemWidth - 1);\r\n    let pagesCount = Math.ceil(products.length / maxItemsCountPerPage);\r\n    let index = 0;\r\n    let pagesArr: any = [];\r\n\r\n    for (let i = 0; i < pagesCount; i++) {\r\n      const itemsForPageArr = [];\r\n\r\n      for (let i = 0; i < maxItemsCountPerPage; i++) {\r\n        if (index === products.length) break;\r\n        itemsForPageArr.push(<ProductCard key={products[index].id} ebook={products[index]} cardStyleVersion='cover' itemWidth={itemWidth} />);\r\n        index++;\r\n      }\r\n\r\n      pagesArr.push(itemsForPageArr);\r\n    }\r\n    setPagesArray(pagesArr);\r\n  }, [products]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchRandomEbooks({ productsCount: 12, category: 'Wszystkie Ebooki' }));\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    if (!fetchError) createPages();\r\n  }, [createPages])\r\n\r\n\r\n  return (\r\n    <div className={slider}>\r\n      <Suspense fallback={<div>Loading...</div>}>\r\n        {/* slider pages */}\r\n        <div className={pagesContainer} ref={pagesContRef} >\r\n          {fetchError ? <ShowError /> : pagesArray.map((item, index) => { return <SliderPage key={index} slidePage={slidePage}>{item}</SliderPage> })}\r\n        </div>\r\n\r\n        {/* elements for selecting page  */}\r\n        <ul className={sliderPages}>\r\n          {pagesArray.map((item, index) => {\r\n            return <li\r\n              key={Math.random()}\r\n              className={`${sliderPage} ${slidePage === index ? active : null}`}\r\n              onClick={() => turnPage(index + 100)} />\r\n          })}\r\n        </ul>\r\n\r\n        {/* elements for turning page*/}\r\n        <span className={`${arrow} ${leftArr} `} onClick={() => turnPage(-1)}>&lt;</span>\r\n        <span className={`${arrow} ${rightArr}`} onClick={() => turnPage(1)}>&gt;</span>\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Slider;"],"sourceRoot":""}